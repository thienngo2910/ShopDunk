@model IEnumerable<ShopDunk.Models.CartItem>
@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Thanh toán</h2>

@using (Html.BeginForm("PlaceOrder", "Order", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="row g-4">

        <div class="col-md-7">
            <h4>Thông tin giao hàng</h4>

            <div class="mb-3">
                <label for="shippingAddress" class="form-label">Địa chỉ giao hàng</label>
                <input type="text" id="shippingAddress" name="shippingAddress" class="form-control" required />
            </div>

            <div class="mb-3">
                <label for="phoneNumber" class="form-label">Số điện thoại</label>
                <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" required />
            </div>

            <div class="mb-3">
                <label for="note" class="form-label">Ghi chú (Tùy chọn)</label>
                <textarea id="note" name="note" class="form-control" rows="3" placeholder="Ghi chú cho người giao hàng..."></textarea>
            </div>
            <h4>Phương thức thanh toán</h4>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="paymentMethod" id="paymentCod" value="COD" checked required>
                <label class="form-check-label" for="paymentCod">
                    Thanh toán khi nhận hàng (COD)
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="paymentMethod" id="paymentBank" value="BankTransfer" disabled>
                <label class="form-check-label" for="paymentBank">
                    Chuyển khoản ngân hàng (Chưa hỗ trợ)
                </label>
            </div>

            @Html.ValidationSummary(false, "", new { @class = "text-danger mt-3" })
            @if (TempData["Error"] != null)
            {
                <div class="alert alert-danger mt-3">@TempData["Error"]</div>
            }

            <hr class="my-4" />

            <button type="submit" class="btn btn-primary btn-lg w-100">Xác nhận đặt hàng</button>
        </div>

        <div class="col-md-5">
            <h4>Tóm tắt đơn hàng</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Số lượng</th>
                        <th>Thành tiền</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Product.Name</td>
                            <td>@item.Quantity</td>
                            <td>@((item.Product.Price * item.Quantity).ToString("N0")) ₫</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

    </div>
}
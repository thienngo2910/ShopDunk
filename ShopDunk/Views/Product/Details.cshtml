@model ShopDunk.Models.Product
@{
    ViewBag.Title = Model.Name;
    Layout = "~/Views/Shared/_Layout.cshtml"; // Đảm bảo dùng layout
    var suggested = (List<ShopDunk.Models.Product>)ViewBag.SuggestedProducts;
}

<div class="row">
    <div class="col-md-6 mb-4">
        <img src="@(string.IsNullOrEmpty(Model.ImageUrl) ? "https://placehold.co/600x600/eee/ccc?text=N/A" : Model.ImageUrl)"
             class="img-fluid" />
    </div>

    <div class="col-md-6">
        <h2 class="fw-bold">@Model.Name</h2>

        <p class="fs-4" style="color: var(--accent-gold); font-weight: 700;">
            @Model.Price.ToString("N0") ₫
        </p>

        @* --- SỬA LỖI: Thêm style="white-space: pre-line;" để giữ dấu xuống dòng --- *@
        <p class="text-light" style="white-space: pre-line;">
            @Model.Description
        </p>

        <hr style="border-color: var(--border-color);" />

        @* Nút Thêm vào giỏ *@
        <a href="/Cart/Add/@Model.ProductID" class="btn btn-primary" style="background-color: var(--accent-gold); border: none; color: var(--dark-bg); font-weight: 600;">
            <i class="fas fa-shopping-cart me-2"></i>
            Thêm vào giỏ
        </a>
    </div>
</div>

@* --- KHU VỰC GỢI Ý SẢN PHẨM KHÁC --- *@
@if (suggested != null && suggested.Any())
{
    <hr class="my-5" style="border-color: var(--border-color);" />

    <div class="category-section">
        <h3 class="category-title mb-3">Bạn có thể thích</h3>

        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
            @foreach (var p in suggested)
            {
                @Html.Partial("~/Views/Shared/_ProductCard.cshtml", p)
            }
        </div>
    </div>
}